version: '3.8'

services:
  
  service-test-first-api:
    image: ${REGISTRY:-ukraine}/service-test-first-api:${TAG:-latest}
    build:
      context: .
      dockerfile: src/Services/Test/FirstTestApiService/Dockerfile
    depends_on:
      - component-seq
      - component-zipkin
      - component-postgresql
    networks:
      - ukraine-network
      
  service-test-second-api:
    image: ${REGISTRY:-ukraine}/service-test-second-api:${TAG:-latest}
    build:
      context: .
      dockerfile: src/Services/Test/SecondTestApiService/Dockerfile
    networks:
      - ukraine-network
        
  web-status:
    image: ${REGISTRY:-ukraine}/web-status:${TAG:-latest}
    build:
      context: .
      dockerfile: src/Web/Ukraine.Web.Status/Dockerfile
    depends_on:
      - component-seq
      - component-postgresql
      - service-test-first-api
    networks:
      - ukraine-network
      
  component-postgresql:
    image: postgres:14.4
    container_name: postgres
    networks:
      - ukraine-network
      
  component-zipkin:
    image: openzipkin/zipkin:latest
    container_name: zipkin
    networks:
      - ukraine-network
      
  component-seq:
    image: datalust/seq:latest
    container_name: seq
    networks:
      - ukraine-network
        
networks:
  ukraine-network: